### Сервис с открытым протоколом

Когда мы пытаемся интегрировать две подсистемы, обычно между ними появляется слой трансляции. Он работает как буфер между клиентской подсистемой и внешней подсистемой, с которой мы интегрируемся. В зависимости от сложности связей и того, как спроектирована внешняя подсистема, этот слой может получиться вполне цельным и непротиворечивым. Но если выясняется, что внешнюю подсистему использует не один клиент, а несколько, то слои трансляции придётся делать для каждого. В итоге все эти слои будут по сути решать одну и ту же задачу перевода и содержать очень похожий код.

Когда подсистему нужно интегрировать со многими другими, кастомный переводчик под каждого потребителя быстро увязает в поддержке: поддерживать приходится всё больше, и при любых изменениях растёт риск что то поломать.

Решение — смотреть на внешнюю подсистему как на поставщика сервисов. Если обернуть её набором Сервисов, то остальные подсистемы будут ходить именно в эти Сервисы, и отдельные слои трансляции не понадобятся. Сложность в том, что каждой подсистеме может требоваться свой специфический способ взаимодействия с внешней, и собрать из этого единый, связный набор Сервисов бывает непросто.

Определите протокол (контракт), который открывает доступ к вашей подсистеме как к набору Сервисов. Откройте этот протокол, чтобы все, кому нужно с вами интегрироваться, могли им пользоваться. Развивайте и расширяйте протокол под новые интеграционные требования, кроме случаев, когда у одной команды есть нестандартные, особые хотелки. Тогда для такого частного случая используйте точечный, одноразовый переводчик, который дополнит протокол, чтобы общий протокол оставался простым и цельным.